{"remainingRequest":"/home/gynchiii/gem-farm/app/gem-farm/node_modules/babel-loader/lib/index.js!/home/gynchiii/gem-farm/app/gem-farm/node_modules/ts-loader/index.js??ref--14-2!/home/gynchiii/gem-farm/app/gem-farm/src/common/gem-bank/index.ts","dependencies":[{"path":"/home/gynchiii/gem-farm/app/gem-farm/src/common/gem-bank/index.ts","mtime":1643839215713},{"path":"/home/gynchiii/gem-farm/app/gem-farm/babel.config.js","mtime":1643839215713},{"path":"/home/gynchiii/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js","mtime":1643597848373},{"path":"/home/gynchiii/gem-farm/app/gem-farm/node_modules/babel-loader/lib/index.js","mtime":1643597848340},{"path":"/home/gynchiii/gem-farm/app/gem-farm/node_modules/ts-loader/index.js","mtime":1643597859789}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2d5bmNoaWlpL2dlbS1mYXJtL2FwcC9nZW0tZmFybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheS5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvZ3luY2hpaWkvZ2VtLWZhcm0vYXBwL2dlbS1mYXJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvZ3luY2hpaWkvZ2VtLWZhcm0vYXBwL2dlbS1mYXJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL2hvbWUvZ3luY2hpaWkvZ2VtLWZhcm0vYXBwL2dlbS1mYXJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cy5qcyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvZ3luY2hpaWkvZ2VtLWZhcm0vYXBwL2dlbS1mYXJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlci5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9neW5jaGlpaS9nZW0tZmFybS9hcHAvZ2VtLWZhcm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiOwppbXBvcnQgeyBHZW1CYW5rQ2xpZW50IH0gZnJvbSAnQGdlbXdvcmtzL2dlbS1mYXJtLXRzJzsKaW1wb3J0IHsgS2V5cGFpciB9IGZyb20gJ0Bzb2xhbmEvd2ViMy5qcyc7CmltcG9ydCB7IERFRkFVTFRTIH0gZnJvbSAnQC9nbG9iYWxzJzsKaW1wb3J0IHsgTm9kZVdhbGxldCwgcHJvZ3JhbXMgfSBmcm9tICdAbWV0YXBsZXgvanMnOyAvL3doZW4gd2Ugb25seSB3YW50IHRvIHZpZXcgdmF1bHRzLCBubyBuZWVkIHRvIGNvbm5lY3QgYSByZWFsIHdhbGxldC4KCmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGYWtlV2FsbGV0KCkgewogIHZhciBsZWFrZWRLcCA9IEtleXBhaXIuZnJvbVNlY3JldEtleShVaW50OEFycmF5LmZyb20oWzIwOCwgMTc1LCAxNTAsIDI0MiwgODgsIDM0LCAxMDgsIDg4LCAxNzcsIDE2LCAxNjgsIDc1LCAxMTUsIDE4MSwgMTk5LCAyNDIsIDEyMCwgNCwgNzgsIDc1LCAxOSwgMjI3LCAxMywgMjE1LCAxODQsIDEwOCwgMjI2LCA1MywgMTExLCAxNDksIDE3OSwgODQsIDEzNywgMTIxLCA3OSwgMSwgMTYwLCAyMjMsIDEyNCwgMjQxLCAyMDIsIDIwMywgMjIwLCAyMzcsIDUwLCAyNDIsIDU3LCAxNTgsIDIyNiwgMjA3LCAyMDMsIDE4OCwgNDMsIDI4LCA3MCwgMTEwLCAyMTQsIDIzNCwgMjUxLCAxNSwgMjQ5LCAxNTcsIDYyLCA4MF0pKTsKICByZXR1cm4gbmV3IE5vZGVXYWxsZXQobGVha2VkS3ApOwp9IC8vbmVlZCBhIHNlcGFyYXRlIGZ1bmMgY296IGZldGNoaW5nIElETCBpcyBhc3luYyBhbmQgY2FuJ3QgYmUgZG9uZSBpbiBjb25zdHJ1Y3RvcgoKZXhwb3J0IGZ1bmN0aW9uIGluaXRHZW1CYW5rKF94LCBfeDIpIHsKICByZXR1cm4gX2luaXRHZW1CYW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9pbml0R2VtQmFuaygpIHsKICBfaW5pdEdlbUJhbmsgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGNvbm4sIHdhbGxldCkgewogICAgdmFyIHdhbGxldFRvVXNlLCBpZGw7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB3YWxsZXRUb1VzZSA9IHdhbGxldCAhPT0gbnVsbCAmJiB3YWxsZXQgIT09IHZvaWQgMCA/IHdhbGxldCA6IGNyZWF0ZUZha2VXYWxsZXQoKTsKICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZmV0Y2goJ2dlbV9iYW5rLmpzb24nKTsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zZW50Lmpzb24oKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGlkbCA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgbmV3IEdlbUJhbmsoY29ubiwgd2FsbGV0VG9Vc2UsIGlkbCkpOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTgpOwogIH0pKTsKICByZXR1cm4gX2luaXRHZW1CYW5rLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCB2YXIgR2VtQmFuayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0dlbUJhbmtDbGllbnQpIHsKICBfaW5oZXJpdHMoR2VtQmFuaywgX0dlbUJhbmtDbGllbnQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEdlbUJhbmspOwoKICBmdW5jdGlvbiBHZW1CYW5rKGNvbm4sIHdhbGxldCwgaWRsKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2VtQmFuayk7CgogICAgdmFyIHByb2dyYW1JZCA9IERFRkFVTFRTLkdFTV9CQU5LX1BST0dfSUQ7CiAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgY29ubiwgd2FsbGV0LCBpZGwsIHByb2dyYW1JZCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoR2VtQmFuaywgW3sKICAgIGtleTogImluaXRCYW5rV2FsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfaW5pdEJhbmtXYWxsZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGJhbmssIHR4U2lnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGJhbmsgPSBLZXlwYWlyLmdlbmVyYXRlKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXRCYW5rKGJhbmssIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgdGhpcy53YWxsZXQucHVibGljS2V5KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdHhTaWcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgewogICAgICAgICAgICAgICAgICBiYW5rOiBiYW5rLAogICAgICAgICAgICAgICAgICB0eFNpZzogdHhTaWcKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5pdEJhbmtXYWxsZXQoKSB7CiAgICAgICAgcmV0dXJuIF9pbml0QmFua1dhbGxldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5pdEJhbmtXYWxsZXQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJpbml0VmF1bHRXYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbml0VmF1bHRXYWxsZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGJhbmspIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHRoaXMuaW5pdFZhdWx0KGJhbmssIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgdGhpcy53YWxsZXQucHVibGljS2V5LCB0aGlzLndhbGxldC5wdWJsaWNLZXksICd0ZXN0X3ZhdWx0JykpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbml0VmF1bHRXYWxsZXQoX3gzKSB7CiAgICAgICAgcmV0dXJuIF9pbml0VmF1bHRXYWxsZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluaXRWYXVsdFdhbGxldDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInNldFZhdWx0TG9ja1dhbGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NldFZhdWx0TG9ja1dhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoYmFuaywgdmF1bHQsIHZhdWx0TG9ja2VkKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCB0aGlzLnNldFZhdWx0TG9jayhiYW5rLCB2YXVsdCwgdGhpcy53YWxsZXQucHVibGljS2V5LCB2YXVsdExvY2tlZCkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZXRWYXVsdExvY2tXYWxsZXQoX3g0LCBfeDUsIF94NikgewogICAgICAgIHJldHVybiBfc2V0VmF1bHRMb2NrV2FsbGV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZXRWYXVsdExvY2tXYWxsZXQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJkZXBvc2l0R2VtV2FsbGV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZGVwb3NpdEdlbVdhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoYmFuaywgdmF1bHQsIGdlbUFtb3VudCwgZ2VtTWludCwgZ2VtU291cmNlLCBjcmVhdG9yKSB7CiAgICAgICAgdmFyIF95aWVsZCR0aGlzJGZpbmRXaGl0ZSwgX3lpZWxkJHRoaXMkZmluZFdoaXRlMiwgbWludFByb29mLCBidW1wLCBfeWllbGQkdGhpcyRmaW5kV2hpdGUzLCBfeWllbGQkdGhpcyRmaW5kV2hpdGU0LCBjcmVhdG9yUHJvb2YsIGJ1bXAyLCBtZXRhZGF0YTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRXaGl0ZWxpc3RQcm9vZlBEQShiYW5rLCBnZW1NaW50KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJHRoaXMkZmluZFdoaXRlID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfeWllbGQkdGhpcyRmaW5kV2hpdGUyID0gX3NsaWNlZFRvQXJyYXkoX3lpZWxkJHRoaXMkZmluZFdoaXRlLCAyKTsKICAgICAgICAgICAgICAgIG1pbnRQcm9vZiA9IF95aWVsZCR0aGlzJGZpbmRXaGl0ZTJbMF07CiAgICAgICAgICAgICAgICBidW1wID0gX3lpZWxkJHRoaXMkZmluZFdoaXRlMlsxXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRXaGl0ZWxpc3RQcm9vZlBEQShiYW5rLCBjcmVhdG9yKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3lpZWxkJHRoaXMkZmluZFdoaXRlMyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX3lpZWxkJHRoaXMkZmluZFdoaXRlNCA9IF9zbGljZWRUb0FycmF5KF95aWVsZCR0aGlzJGZpbmRXaGl0ZTMsIDIpOwogICAgICAgICAgICAgICAgY3JlYXRvclByb29mID0gX3lpZWxkJHRoaXMkZmluZFdoaXRlNFswXTsKICAgICAgICAgICAgICAgIGJ1bXAyID0gX3lpZWxkJHRoaXMkZmluZFdoaXRlNFsxXTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcHJvZ3JhbXMubWV0YWRhdGEuTWV0YWRhdGEuZ2V0UERBKGdlbU1pbnQpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgbWV0YWRhdGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmRlcG9zaXRHZW0oYmFuaywgdmF1bHQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgZ2VtQW1vdW50LCBnZW1NaW50LCBnZW1Tb3VyY2UsIG1pbnRQcm9vZiwgbWV0YWRhdGEsIGNyZWF0b3JQcm9vZikpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZGVwb3NpdEdlbVdhbGxldChfeDcsIF94OCwgX3g5LCBfeDEwLCBfeDExLCBfeDEyKSB7CiAgICAgICAgcmV0dXJuIF9kZXBvc2l0R2VtV2FsbGV0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBkZXBvc2l0R2VtV2FsbGV0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAid2l0aGRyYXdHZW1XYWxsZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF93aXRoZHJhd0dlbVdhbGxldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoYmFuaywgdmF1bHQsIGdlbUFtb3VudCwgZ2VtTWludCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgdGhpcy53aXRoZHJhd0dlbShiYW5rLCB2YXVsdCwgdGhpcy53YWxsZXQucHVibGljS2V5LCBnZW1BbW91bnQsIGdlbU1pbnQsIHRoaXMud2FsbGV0LnB1YmxpY0tleSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB3aXRoZHJhd0dlbVdhbGxldChfeDEzLCBfeDE0LCBfeDE1LCBfeDE2KSB7CiAgICAgICAgcmV0dXJuIF93aXRoZHJhd0dlbVdhbGxldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gd2l0aGRyYXdHZW1XYWxsZXQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJhZGRUb1doaXRlbGlzdFdhbGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2FkZFRvV2hpdGVsaXN0V2FsbGV0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihiYW5rLCBhZGRyZXNzVG9XaGl0ZWxpc3QsIHdoaXRlbGlzdFR5cGUpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHRoaXMuYWRkVG9XaGl0ZWxpc3QoYmFuaywgdGhpcy53YWxsZXQucHVibGljS2V5LCBhZGRyZXNzVG9XaGl0ZWxpc3QsIHdoaXRlbGlzdFR5cGUpKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYWRkVG9XaGl0ZWxpc3RXYWxsZXQoX3gxNywgX3gxOCwgX3gxOSkgewogICAgICAgIHJldHVybiBfYWRkVG9XaGl0ZWxpc3RXYWxsZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGFkZFRvV2hpdGVsaXN0V2FsbGV0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAicmVtb3ZlRnJvbVdoaXRlbGlzdFdhbGxldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZUZyb21XaGl0ZWxpc3RXYWxsZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KGJhbmssIGFkZHJlc3NUb1JlbW92ZSkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgdGhpcy5yZW1vdmVGcm9tV2hpdGVsaXN0KGJhbmssIHRoaXMud2FsbGV0LnB1YmxpY0tleSwgYWRkcmVzc1RvUmVtb3ZlKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlbW92ZUZyb21XaGl0ZWxpc3RXYWxsZXQoX3gyMCwgX3gyMSkgewogICAgICAgIHJldHVybiBfcmVtb3ZlRnJvbVdoaXRlbGlzdFdhbGxldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVtb3ZlRnJvbVdoaXRlbGlzdFdhbGxldDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEdlbUJhbms7Cn0oR2VtQmFua0NsaWVudCk7"},{"version":3,"sources":["/home/gynchiii/gem-farm/app/gem-farm/src/common/gem-bank/index.ts"],"names":[],"mappings":"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","sourcesContent":["import * as anchor from '@project-serum/anchor';\nimport { BN, Idl } from '@project-serum/anchor';\nimport { GemBankClient, WhitelistType } from '@gemworks/gem-farm-ts';\nimport { Connection, Keypair, PublicKey } from '@solana/web3.js';\nimport { SignerWalletAdapter } from '@solana/wallet-adapter-base';\nimport { DEFAULTS } from '@/globals';\nimport { NodeWallet, programs } from '@metaplex/js';\n\n//when we only want to view vaults, no need to connect a real wallet.\nexport function createFakeWallet() {\n  const leakedKp = Keypair.fromSecretKey(\n    Uint8Array.from([\n      208, 175, 150, 242, 88, 34, 108, 88, 177, 16, 168, 75, 115, 181, 199, 242,\n      120, 4, 78, 75, 19, 227, 13, 215, 184, 108, 226, 53, 111, 149, 179, 84,\n      137, 121, 79, 1, 160, 223, 124, 241, 202, 203, 220, 237, 50, 242, 57, 158,\n      226, 207, 203, 188, 43, 28, 70, 110, 214, 234, 251, 15, 249, 157, 62, 80,\n    ])\n  );\n  return new NodeWallet(leakedKp);\n}\n\n//need a separate func coz fetching IDL is async and can't be done in constructor\nexport async function initGemBank(\n  conn: Connection,\n  wallet?: SignerWalletAdapter\n) {\n  const walletToUse = wallet ?? createFakeWallet();\n  const idl = await (await fetch('gem_bank.json')).json();\n  return new GemBank(conn, walletToUse as anchor.Wallet, idl);\n}\n\nexport class GemBank extends GemBankClient {\n  constructor(conn: Connection, wallet: anchor.Wallet, idl: Idl) {\n    const programId = DEFAULTS.GEM_BANK_PROG_ID;\n    super(conn, wallet, idl, programId);\n  }\n\n  async initBankWallet() {\n    const bank = Keypair.generate();\n    const txSig = await this.initBank(\n      bank,\n      this.wallet.publicKey,\n      this.wallet.publicKey\n    );\n    return { bank, txSig };\n  }\n\n  async initVaultWallet(bank: PublicKey) {\n    return this.initVault(\n      bank,\n      this.wallet.publicKey,\n      this.wallet.publicKey,\n      this.wallet.publicKey,\n      'test_vault'\n    );\n  }\n\n  async setVaultLockWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    vaultLocked: boolean\n  ) {\n    return this.setVaultLock(bank, vault, this.wallet.publicKey, vaultLocked);\n  }\n\n  async depositGemWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    gemAmount: BN,\n    gemMint: PublicKey,\n    gemSource: PublicKey,\n    creator: PublicKey\n  ) {\n    const [mintProof, bump] = await this.findWhitelistProofPDA(bank, gemMint);\n    const [creatorProof, bump2] = await this.findWhitelistProofPDA(\n      bank,\n      creator\n    );\n    const metadata = await programs.metadata.Metadata.getPDA(gemMint);\n\n    return this.depositGem(\n      bank,\n      vault,\n      this.wallet.publicKey,\n      gemAmount,\n      gemMint,\n      gemSource,\n      mintProof,\n      metadata,\n      creatorProof\n    );\n  }\n\n  async withdrawGemWallet(\n    bank: PublicKey,\n    vault: PublicKey,\n    gemAmount: BN,\n    gemMint: PublicKey\n  ) {\n    return this.withdrawGem(\n      bank,\n      vault,\n      this.wallet.publicKey,\n      gemAmount,\n      gemMint,\n      this.wallet.publicKey\n    );\n  }\n\n  async addToWhitelistWallet(\n    bank: PublicKey,\n    addressToWhitelist: PublicKey,\n    whitelistType: WhitelistType\n  ) {\n    return this.addToWhitelist(\n      bank,\n      this.wallet.publicKey,\n      addressToWhitelist,\n      whitelistType\n    );\n  }\n\n  async removeFromWhitelistWallet(bank: PublicKey, addressToRemove: PublicKey) {\n    return this.removeFromWhitelist(\n      bank,\n      this.wallet.publicKey,\n      addressToRemove\n    );\n  }\n}\n"],"sourceRoot":""}]}